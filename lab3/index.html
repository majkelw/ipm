<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <style>
        #platform {
            background-color: silver;
            height: 100%;
            width: 70%;
            position: fixed;
        }

        #button_block_generator {
            width: 100%;
            height: 20%;
        }
    </style>
</head>



<body>
    <ol class="list">
        <li class="single_element" draggable="true" contenteditable="true">jabłko</li>
        <li class="single_element" draggable="true" contenteditable="true">test</li>
        <li class="single_element" draggable="true" contenteditable="true">gruszka</li>
        <li class="single_element" draggable="true" contenteditable="true">samochód</li>
    </ol>

    <div id="platform">
        <button id="button_block_generator" onclick="generateBlock()">Generuj klocek</button>

    </div>
</body>


<script>
    var focusedElement = null;

    function handleDragStart(e) {
        focusedElement = this;
        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('text/html', this.innerHTML);
    }

    function handleDragEnter(e) {
        this.classList.add('over');
    }

    function handleDragOver(e) {
        if (e.preventDefault) {
            e.preventDefault();
        }

        e.dataTransfer.dropEffect = 'move';
    }

    function handleDragEnd(e) {
        list_items.forEach(function (item) {
            item.classList.remove('over');
        });
    }


    function handleDragLeave(e) {
        this.classList.remove('over');
    }

    function handleDrop(e) {
        if (e.stopPropagation) {
            e.stopPropagation();
        }

        if (focusedElement != this) {
            focusedElement.innerHTML = this.innerHTML;
            this.innerHTML = e.dataTransfer.getData('text/html');
        }

    }



    var list_items = document.querySelectorAll('.list .single_element');
    list_items.forEach(function (item) {
        item.addEventListener('dragstart', handleDragStart);
        item.addEventListener('dragenter', handleDragEnter);
        item.addEventListener('dragleave', handleDragLeave);
        item.addEventListener('dragend', handleDragEnd);
        item.addEventListener('dragover', handleDragOver);
        item.addEventListener('drop', handleDrop);
    });




    function generateBlock() {
        var block = document.createElement("div");
        block.setAttribute("draggable", "true");
        block.setAttribute("style", "width: 10%; height: 10%; display: inline-block;");


        var chars = "0123456789ABCDEF";
        var color = "";

        for (let i = 0; i < 6; i++) {
            color += chars[Math.floor(Math.random() * 16)];
        }

        block.style.backgroundColor = "#" + color;
        document.getElementById("platform").appendChild(block);


    }



</script>

</html>